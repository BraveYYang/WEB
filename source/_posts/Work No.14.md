---
title: C语言数组学习
tag: C/C++
date: 2024-08-05
categories: C/C++
index_img: https://s2.loli.net/2024/07/31/OocearM37hWYHTp.jpg
---

# C语言数组学习

### 感谢博主：

[【C语言 | 数组】C语言数组详解(经典，超详细)-CSDN博客](https://blog.csdn.net/wkd_007/article/details/134400060)

[C 数组 | 菜鸟教程 (runoob.com)](https://www.runoob.com/cprogramming/c-arrays.html)

### 计算机基础单位和数据类型

其中在C语言中的一些特定的数据类型存储也是有一定的范围的：

```
    1. char -------- 1字节
    2. short --------- 2字节
    3. int -------- 4字节   
    4. long ---------- 4字节
    5. long long -------- 8字节
    6. float ---------- 4字节
```

### 数组的储存空间大小和位置

数组的储存空间定义上也和数据类型有关，比如

```
int arr[5] = {0,1,2,3,4}
```

那么，这个数组的数据类型是整数型，一共有五个整数型，所以总占空间为20字节

```
char arr[5] = {'a','b','v','d','h'}
```

这个字符型所占总空间为5字节

二维数组的地址其实也是连续性的，就比如

```
int arr[2][3] = {{1,2,3},{4,5,6}};
int arr[2][3] = {1,2,3,4,5,6}
```

这两种的类型和输出结果都是一致的，第一种定义方法采用{}将行进行隔开，更加清晰明了，而且，如果这个行一共需要3个数据，但是我只定义1个数据，这种写法是符合的，第二种就不符合，第二种的写法是因为二维数组的地址也是连续的，所以第一行结束之后自动承接第二行的第一个数据

当然也可以直接查看他们的地址输出，可以发现地址都是占用四个字节

```
int arr[2][3] = {{1,2,3},{4,5,6}};

for(int i=0;i<2;i++)
{
	for(int j=0;j<3;j++)
	{
		printf("%p",&arr[i][j]);
	}
}

//output
    000000000061FE00
    000000000061FE04
    000000000061FE08
    000000000061FE0C
    000000000061FE10
    000000000061FE14
```

C语言中，在定义数组时，都需要明确的给出数组元素个数。如果要查询数组的大小，可以采用这种方式进行计算

```
int arr[6] = { 1,2,3,4,5,6 };
//数组的大小：sizeof（数组名）/sizeof（数据类型）
int ret = sizeof(arr)/sizeof(arr[0]);
```

其中sizeof的使用上也是有区分的

```
sizeof(arr);//这个是输出整个数组的大小
sizeof(&arr);//这个是输出首地址的大小
sizeof(a[0]);//这个是输出首地址的大小
```

### 数组定义类型

如果要定义类似这种数组，那么hello占数组的五个数据还是只是一个数据呢

```
char str[] = "Hello"; 
```

我们可以将str的字符进行逐个输出可以发现，我们定义一整串字符串的时候，系统会自动帮我们拆分整个字符串，然后判断这个数组的大小

```
int ret = sizeof(str)/sizeof(str[0]);
for(int k=0;k<ret;k++)
{
    printf("str[%d]=%c\n",k,str[k]);
}
    
//output
    str[0]=H
    str[1]=e
    str[2]=l
    str[3]=l
    str[4]=o
    str[5]="\0"//空字符
```

**数组中必须有元素，不可能为0个元素个数。**

**数组里的元素必须相同，不可能出现两种不同类型的元素，如不能同时出现int和char。**

数组的定义分为完全初始化和不完全初始化，完全初始化就是将数据值定义和数组长度相匹配，定义了数组是五个整数型，那填充的也是五个整数型，不完全初始化就是我定义了数据是五个整数型，但是我只填充了三个整数型，那么剩下的两个整数型都是空值，系统默认为0，后续我们可以在往里面写数值

数组的指定输出可以直接用数组名+[数组位置]，二维数组也是类似，地址也是类似

```
int arr[5]={1,2,3,4,5};
int arr1[2][3]={{1,2},{3,4,5}};
printf("%d\n",arr[1]);//输出是2
printf("%d\n",arr1[1][1]);//输出是4
printf("%p\n",&arr[1]);//输出是000000000061FE04
```

### 指针和数组的区别

**数组**：数组是用于储存多个相同类型数据的集合。

**指针**：指针相当于一个变量，但是它和不同变量不一样，它存放的是其它变量在内存中的地址。

**数组**：数组在内存中是连续存放的，开辟一块连续的内存空间。数组是根据数组的下进行访问的，多维数组在内存中是按照一维数组存储的，只是在逻辑上是多维的。数组的存储空间，不是在静态区就是在栈上。

**指针**：指针很灵活，它可以指向任意类型的数据。指针的类型说明了它所指向地址空间的内存。由于指针本身就是一个变量，再加上它所存放的也是变量，所以指针的存储空间不能确定。

#### 数组传参时，会退化为指针

退化的意义：C语言只会以值拷贝的方式传递参数，参数传递时，如果只拷贝整个数组，效率会大大降低，并且在参数位于栈上，太大的数组拷贝将会导致栈溢出。

因此，C语言将数组的传参进行了退化。将整个数组拷贝一份传入函数时，将数组名看做常量指针，传数组首元素的地址。

```
int main()
{
    int arr[10] = {1,2,3,4,5,6,7,8,9};
    int *p = arr;
    int sz = sizeof(arr)/sizeof(arr[0]);
    //一级指针p，传给函数
    
    for(int i=0; i<sz; i++)
    {
       printf("%d\n", *(p+i));
    }
    
    return 0;
}
```

