---
title: C语言指针学习
tag: C/C++
date: 2024-08-02
categories: C/C++
index_img: https://s2.loli.net/2024/07/31/b1YNChod7EyzTsF.jpg
---

# C语言指针学习

### 计算机的语言表示

在现代的计算机中主要采用的数字集成电路完成，数字电路通过高低电平只能表示**0和1**，所以就出现了，计算机只会识别**0和1**。无论是存储还是计算，计算机均采用二进制体系完成。

例如：十进制 **4** ---------- 用二进制表示为 00000**100**

在C语言中，一个`int`类型的整数占用的字节数是固定的，并且与具体数值（例如`1`）无关。通常情况下，`int`类型的大小是4字节（32位）。不过，这个大小可能会因平台或编译器的不同而有所变化。

### **计算机基础单位和数据类型**

```
 	1. bit------------ 比特 ------------- 位
    2. byte --------- 字节 ------------- 1byte = 8bit
    3. KB ------------ 千字节 ---------- 1KB = 1024byte
    4. MB ----------- 兆 ---------------- 1MB = 1024KB
    5. GB ----------- 吉字节 ---------- 1GB = 1024MB
    6. TB  ----------- 太字节 ---------- 1TB = 1024GB
    7. PB ----------- 拍字节 ----------- 1PB = 1024TB
```

其中在C语言中的一些特定的数据类型存储也是有一定的范围的：

```
    1. char -------- 1字节
    2. short --------- 2字节
    3. int -------- 4字节   
    4. long ---------- 4字节
    5. long long -------- 8字节
    6. float ---------- 4字节
```

### **二进制数**

  **1. 二进制数是带符号的，即分正、负数。其中若是正数最高位显示 0 ，若是负数最高位显示 1**

  **2. 二进制位通常也会受到数据类型的限制，比如 char 型 1 个字节 8 个比特位。**

```
  举例：int 2 ;  ------------------二进制表示：00000000 00000000 00000000 00000010
```

### 指针

**int \*p;** -- 首先从 p 处开始，先与 ***** 结合，所以说明 p 是一个指针, 然后再与 int 结合, 说明指针所指向的内容的类型为 int 型。所以 p 是一个返回整型数据的指针。

 **int \*p[3];** -- 首先从 p 处开始, 先与 [] 结合，因为其优先级比 ***** 高,所以 p 是一个数组, 然后再与 * 结合, 说明数组里的元素是指针类型, 然后再与 int 结合, 说明指针所指向的内容的类型是整型的, 所以 p 是一个由返回整型数据的指针所组成的数组。

**int \**p;** -- 首先从 p 开始, 先与 * 结合, 说是 p 是一个指针, 然后再与 * 结合, 说明指针所指向的元素是指针, 然后再与 int 结合, 说明该指针所指向的元素是整型数据。由于二级指针以及更高级的指针极少用在复杂的类型中, 所以后面更复杂的类型我们就不考虑多级指针了, 最多只考虑一级指针

我们说一个指针的值是XX，就相当于说该指针指向了以XX 为首地址的一片内存区域；

指针的类型(即指针本身的类型)和指针所指向的类型是两个概念

只要把指针声明语句里的指针名字去掉，剩下的部分就是这个指针的类型。这是指针本身所具有的类型

```
1、int *ptr; : 指针的类型是 int*
2、char *ptr; : 指针的类型是 char*
3、int **ptr; : 指针的类型是 int**
4、int (*ptr)[3]; : 指针的类型是 int(*)[3]
5、int *(*ptr)[4]; : 指针的类型是 int*(*)[4]
```

指针所指向的类型决定了编译器将把那片内存区里的内容当做什么来看待。

```
1、int*ptr; : 指针所指向的类型是 int
2、char*ptr; : 指针所指向的的类型是 char
3、int**ptr; : 指针所指向的的类型是 int*
4、int(*ptr)[3]; : 指针所指向的的类型是 int()[3]
5、int*(*ptr)[4]; : 指针所指向的的类型是 int*()[4]
```

指针本身占了多大的内存？你只要用函数sizeof(指针的类型)测一下就知道了。在 32 位平台里，指针本身占据了 4 个字节的长度

&符号代表地址的符号，是内存地址，然后内存地址上面会存放内容，地址不代表是内存空间

*代表指向，p代表内存地址，`*p`指向这片内存地址上面的内容

#### 指针是什么？

内存：就是存放东西的空间

![img](https://i-blog.csdnimg.cn/blog_migrate/8eafbb6548c929bc99f94ef018128c1a.png)![img](https://i-blog.csdnimg.cn/blog_migrate/dba3cdc29d8127ee60c8ca0446bf23fe.png)

左图就是内存，这个内存中有9个空间，一个空间代表一个字节

右图就是在这个内存空间中，去创建两个变量 int a 和一个 char ch 根据基础知识，可以知道int 占4个字节 char 占1个字节，注意内存中间的每一个小空间（就是1个字节）是有编号的（1，2，3，4，5，6，7，8，9），内存的编号就是地址，地址也叫指针。

```
1. 内存的编号就是地址，地址也叫指针。
2. 指针是内存中最小单元的编号，也就是地址。
3. 编号-------->地址---------->指针
```

#### 指针的类型

```
1. 指针类型：决定了指针进行解引用操作的时候，访问几个字节（权限）
2. char * 的指针引用字节访问1个字节
3. int * 的指针引用字节访问4个字节
4. double * 的指针引用字节访问8个字节
```

0x开头的就表示十六进制，1个十六进制位表示4个二进制位

```
	int a = 0x11223344; //这是一个16进制数，一共是8位，所以代表二进制的32位，换算也就是4个字节，一个字节8位
	int *pa=&a; //定义成int类型，就可以访问4个字节的权限
	*pa = 0; //重新替换成零，所以结果是0x00000000
	
	char* pc = &a;  //定义成int类型，就可以访问1个字节的权限
	*pc = 0;  //重新替换成零，所以结果是0x11223300，他只能替换一个字节，也就是八位，两个十六进制位
```

#### 指针打印数组

```
	int a[10] = { 0 };  //内存中创建了10个整型，所以一个数组所占的空间就是40个字节，40b
 
	int* pa = a;  //数组名就是首元素的地址
	for (int i = 0; i < 10; i++)
	{
		*pa = i + 1;   // 数值+1
		 pa++;         //地址+1
		 //*(pa+i)=i+1
		 // pa表示pa中存放的地址  *pa表示：指向存放地址的内容，也就是解用
	}
	for (int i = 0; i < 10; i++)
	{
		printf("%d ", a[i]);
		//printf("%d ", *(pa+i));如果要使用这种输出的话，需要考虑的是，在上一个for循环后，*pa就已经不是指向首地址，而是指向尾地址
	}
	
	int a[5] = {5,6,7,8,9};//定义一个数组
	int* arr = &a[4];//这个指向的是地址类型上面的内容，也就是数组a的第五个数据
	//输出结果：9
	
	int *arr = &a;//这个指向的是数组a的地址类型上面的内容，也就是数组里面的全部数据
	//输出结果：5，6，7，8，9
	
	int *arr;//定义指针类型为int
	arr = a;//指向的是数组a的全部数据地址
	//输出结果：000000000061FDF0 000000000061FDF4 000000000061FDF8 000000000061FDFC 000000000061FE00
```

`void aaaaaa(char* name)` 和 `void aaaaaa(char *name)` 这两种函数声明在 C 语言中实际上是等效的。它们的功能和行为是相同的。
